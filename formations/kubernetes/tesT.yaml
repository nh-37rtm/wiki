apiVersion: v1
kind: Pod
metadata:
  name: mailhog
spec:
  containers:
  - name: test-secret
    image: registry.gitlab.com/37rtm/test/mailhog:tag
    ports:
    - containerPort: 8025
      hostPort: 80
  imagePullSecrets:
   - name: regcred
---

apiVersion: v1
kind: Service
metadata:
  labels:
    class: mailhog
  name: mailhog
spec:
  ports:
  - name: 9999-80
    port: 9999
    protocol: TCP 
    targetPort: 8025
  selector:
    class: mailhog
  type: Cl
---  

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: test-ingress
  labels:
    class: mailhog
spec:
  rules:
    - host: foo.bar.com
      http:
        paths:
        - path: /foo
          pathType: Prefix
          backend:
            serviceName: mailhog
            servicePort: 80
